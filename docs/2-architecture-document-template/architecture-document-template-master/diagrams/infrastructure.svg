<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1249px" preserveAspectRatio="none" style="width:1215px;height:1249px;" version="1.1" viewBox="0 0 1215 1249" width="1215px" zoomAndPan="magnify"><defs/><g><text fill="#888888" font-family="sans-serif" font-size="10" lengthAdjust="spacing" textLength="103" x="1096" y="9.2822">Deployment diagram</text><text fill="#888888" font-family="sans-serif" font-size="10" lengthAdjust="spacing" textLength="124" x="1075" y="20.9229">Infrastucture architecture</text><text fill="#888888" font-family="sans-serif" font-size="10" lengthAdjust="spacing" textLength="87" x="1112" y="32.5635">AllMyData Project</text><text fill="#888888" font-family="sans-serif" font-size="10" lengthAdjust="spacing" textLength="38" x="1164" y="44.2041">(partial)</text><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="120" x="541" y="63.2705">infrastructure</text><!--MD5=[aa2f05b2676d7d34ffa7e771fb7634f3]
cluster client--><rect fill="#FFFFFF" height="256" style="stroke:#000000;stroke-width:1.5;" width="242" x="7" y="74.5156"/><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="50" x="103" y="91.3672">Client</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="128" x="64" y="106.2793">[Desktop / mobile]</text><!--MD5=[633fb7825fae851bee0f05932b747d69]
cluster nav1--><rect fill="#FFFFFF" height="173" style="stroke:#000000;stroke-width:1.5;" width="194" x="31" y="133.5156"/><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="120" x="68" y="150.3672">Web browser</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="178" x="39" y="165.2793">[Chrome / Firefox / Safari]</text><!--MD5=[dcf9d23a479b6f5be5f2cd2f538bf578]
cluster dc--><rect fill="#FFFFFF" height="1074" style="stroke:#000000;stroke-width:1.5;" width="936" x="273" y="83.5156"/><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="100" x="691" y="100.3672">Datacenter</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="46" x="718" y="115.2793">[Paris]</text><!--MD5=[055f8d928468d5ee47912ab3392f306c]
cluster rp1--><rect fill="#FFFFFF" height="155" style="stroke:#000000;stroke-width:1.5;" width="278" x="906" y="380.5156"/><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="130" x="980" y="397.3672">Reverse Proxy</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="262" x="914" y="412.2793">[x2 Debian Buster &lt;&lt;active/active&gt;&gt;]</text><!--MD5=[2318bb279629df6e6fde992bbe6ab77c]
cluster server_gui--><rect fill="#FFFFFF" height="286" style="stroke:#000000;stroke-width:1.5;" width="574" x="611" y="585.5156"/><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="138" x="829" y="602.3672">HMI HMI server</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="130" x="833" y="617.2793">[x2 Debian Buster]</text><!--MD5=[f217dde53d0f6df02d6d8a2648a2c4d6]
cluster sw1--><rect fill="#FFFFFF" height="203" style="stroke:#000000;stroke-width:1.5;" width="234" x="927" y="644.5156"/><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="104" x="992" y="661.3672">Web server</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="49" x="1019.5" y="676.2793">[Nginx]</text><!--MD5=[370fc723dcc71ff2416a72075e7ea309]
cluster tomcat_batchs1--><rect fill="#FFFFFF" height="187" style="stroke:#000000;stroke-width:1.5;" width="268" x="635" y="652.5156"/><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="91" x="723.5" y="669.3672">JEE Server</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="81" x="728.5" y="684.2793">[Tomcat 10]</text><!--MD5=[28e219c7cd1759c77e93ccc926cd08d3]
cluster API_server--><rect fill="#FFFFFF" height="238" style="stroke:#000000;stroke-width:1.5;" width="290" x="297" y="609.5156"/><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="95" x="394.5" y="626.3672">API Server</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="69" x="407.5" y="641.2793">[x3, RHEL]</text><!--MD5=[fc957f8bf8adafd4952fb52d9ba77f73]
cluster wilfly1--><rect fill="#FFFFFF" height="155" style="stroke:#000000;stroke-width:1.5;" width="242" x="321" y="668.5156"/><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="91" x="396.5" y="685.3672">JEE Server</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="58" x="413" y="700.2793">[Wildfly]</text><!--MD5=[d00fc2baadf01bd66ad11f10bf19f061]
cluster bdd1--><rect fill="#FFFFFF" height="180" style="stroke:#000000;stroke-width:1.5;" width="493" x="624" y="945.5156"/><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="103" x="819" y="962.3672">BDD Server</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="45" x="848" y="977.2793">[RHEL]</text><!--MD5=[82ca70dd5d66feae1f98a21f080c552c]
cluster sup1_server--><rect fill="#FFFFFF" height="155" style="stroke:#000000;stroke-width:1.5;" width="188" x="726" y="142.5156"/><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="160" x="740" y="159.3672">Monitoring Server</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="135" x="752.5" y="174.2793">[x1 Debian Stretch]</text><!--MD5=[4227f5d58943708b70f3d215ef85b45a]
cluster ech1--><rect fill="#FFFFFF" height="155" style="stroke:#000000;stroke-width:1.5;" width="184" x="408" y="958.0156"/><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="149" x="425.5" y="974.8672">Exchange Server</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="144" x="428" y="989.7793">[x1 Windows Server]</text><!--MD5=[33573e971ff506c0f246109ca3fd77bd]
entity spa--><rect fill="#438DD5" height="71.2188" style="stroke:#3C7FC0;stroke-width:1.5;" width="154" x="55" y="219.5156"/><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="128" x="65" y="244.3672">AllMyData SPA</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="94" x="85" y="262.9922">application</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="59" x="102.5" y="277.9043">[React.js]</text><!--MD5=[2d034b0875f5e28a2e66ba2265252e77]
entity r2--><rect fill="#FEFECE" height="52.5938" style="stroke:#000000;stroke-width:1.5;" width="164" x="444" y="228.5156"/><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="66" x="493" y="253.3672">Firewall</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="144" x="454" y="268.2793">[Cisco Firepower 4100]</text><!--MD5=[4fc6c3b5a1fba55664248d096da24559]
entity lb1--><rect fill="#FEFECE" height="52.5938" style="stroke:#000000;stroke-width:1.5;" width="140" x="576" y="466.5156"/><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="120" x="586" y="491.3672">LB Debian lb1</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="61" x="615.5" y="506.2793">[«active»]</text><!--MD5=[775c34017581a5522a6f6586a118dcb1]
entity lb2--><rect fill="#FEFECE" height="52.5938" style="stroke:#000000;stroke-width:1.5;" width="140" x="289" y="466.5156"/><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="120" x="299" y="491.3672">LB Debian lb2</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="71" x="323.5" y="506.2793">[«passive»]</text><!--MD5=[497259d92225bdb84242e2d2165ebfe0]
entity bay1--><path d="M289,1049.5156 C289,1039.5156 339,1039.5156 339,1039.5156 C339,1039.5156 389,1039.5156 389,1049.5156 L389,1091.1094 C389,1101.1094 339,1101.1094 339,1101.1094 C339,1101.1094 289,1101.1094 289,1091.1094 L289,1049.5156 " fill="#438DD5" style="stroke:#3C7FC0;stroke-width:1.5;"/><path d="M289,1049.5156 C289,1059.5156 339,1059.5156 339,1059.5156 C339,1059.5156 389,1059.5156 389,1049.5156 " fill="none" style="stroke:#3C7FC0;stroke-width:1.5;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="80" x="299" y="1078.3672">SAN EMC</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="45" x="316.5" y="1093.2793">[bay 1]</text><!--MD5=[d3722003fa6022840b93c7692d98ee64]
entity all_servers--><rect fill="#FEFECE" height="52.5938" style="stroke:#000000;stroke-width:1.5;" width="138" x="751" y="466.5156"/><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="118" x="761" y="491.3672">&lt;all servers&gt;</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="76" x="782" y="506.2793">[Monitoring]</text><!--MD5=[a9d05f7f70b84ddb3c2779d8f2bc364a]
entity ha1--><rect fill="#438DD5" height="52.5938" style="stroke:#3C7FC0;stroke-width:1.5;" width="150" x="924" y="466.5156"/><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="130" x="934" y="491.3672">Reverse Proxy</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="61" x="968.5" y="506.2793">[HaProxy]</text><!--MD5=[80519cfa4f4cabb423ee6d6987d4e62e]
entity guis1--><rect fill="#438DD5" height="101.4844" style="stroke:#3C7FC0;stroke-width:1.5;" width="203" x="942.5" y="730.5156"/><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="183" x="952.5" y="755.3672">SPA Web Application</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="59" x="1014.5" y="770.2793">[React.js]</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="0" x="1046" y="786.1045"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="166" x="961" y="802.4014">Expose static resources</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="141" x="975.5" y="818.6982">(.js, .html, images ...)</text><!--MD5=[1efad2a5399e22ca699c44f97cb39c39]
entity batch1--><rect fill="#438DD5" height="85.1875" style="stroke:#3C7FC0;stroke-width:1.5;" width="235" x="651.5" y="738.5156"/><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="215" x="661.5" y="763.3672">batch-process-requests</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="36" x="751" y="778.2793">[Java]</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="0" x="771" y="794.1045"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="122" x="710" y="810.4014">Process requests</text><!--MD5=[292e5a3114c0f5c68837ca2833dd9f72]
entity api1--><rect fill="#438DD5" height="52.5938" style="stroke:#3C7FC0;stroke-width:1.5;" width="210" x="337" y="754.5156"/><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="190" x="347" y="779.3672">API service-allmydata</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="36" x="424" y="794.2793">[Java]</text><!--MD5=[358e89297f090aa598af710b97232d4f]
entity pg1--><path d="M667,1049.5156 C667,1039.5156 730,1039.5156 730,1039.5156 C730,1039.5156 793,1039.5156 793,1049.5156 L793,1091.1094 C793,1101.1094 730,1101.1094 730,1101.1094 C730,1101.1094 667,1101.1094 667,1091.1094 L667,1049.5156 " fill="#438DD5" style="stroke:#3C7FC0;stroke-width:1.5;"/><path d="M667,1049.5156 C667,1059.5156 730,1059.5156 730,1059.5156 C730,1059.5156 793,1059.5156 793,1049.5156 " fill="none" style="stroke:#3C7FC0;stroke-width:1.5;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="106" x="677" y="1078.3672">PostgreSQL</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="100" x="680" y="1093.2793">[PostgreSQL 12]</text><!--MD5=[b715e21e4b36457c82624b259f0e13ea]
entity mq1--><path d="M828,1049.5156 C828,1039.5156 908,1039.5156 908,1039.5156 C908,1039.5156 988,1039.5156 988,1049.5156 L988,1091.1094 C988,1101.1094 908,1101.1094 908,1101.1094 C908,1101.1094 828,1101.1094 828,1091.1094 L828,1049.5156 " fill="#438DD5" style="stroke:#3C7FC0;stroke-width:1.5;"/><path d="M828,1049.5156 C828,1059.5156 908,1059.5156 908,1059.5156 C908,1059.5156 988,1059.5156 988,1049.5156 " fill="none" style="stroke:#3C7FC0;stroke-width:1.5;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="140" x="838" y="1078.3672">Message queue</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="68" x="874" y="1093.2793">[RabbitMQ]</text><!--MD5=[75764623d0425db6e25f21048e113307]
entity mail1--><rect fill="#438DD5" height="52.5938" style="stroke:#3C7FC0;stroke-width:1.5;" width="70" x="1023" y="1044.0156"/><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="39" x="1038.5" y="1068.8672">MTA</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="50" x="1033" y="1083.7793">[Postfix]</text><!--MD5=[b9a7eeff770a3fcd3efe9c0d6a637854]
entity sup1--><rect fill="#438DD5" height="52.5938" style="stroke:#3C7FC0;stroke-width:1.5;" width="155" x="742.5" y="228.5156"/><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="135" x="752.5" y="253.3672">Monitoring tool</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="68" x="786" y="268.2793">[Centreon]</text><!--MD5=[018d2d8d50435b42cec2b4140d57d7e0]
entity gw1--><rect fill="#438DD5" height="52.5938" style="stroke:#3C7FC0;stroke-width:1.5;" width="152" x="424" y="1044.0156"/><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="113" x="443.5" y="1068.8672">API Gateway</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="132" x="434" y="1083.7793">[Axway API Gateway]</text><!--MD5=[41e2cdb76a5e93c488fe1edb692e6813]
link spa to r2--><path d="M209.37,255.0156 C275.22,255.0156 369.78,255.0156 438.4,255.0156 " fill="none" id="spa-to-r2" style="stroke:#666666;stroke-width:2.0;"/><polygon fill="#666666" points="443.71,255.0156,434.71,251.0156,438.71,255.0156,434.71,259.0156,443.71,255.0156" style="stroke:#666666;stroke-width:2.0;"/><text fill="#666666" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="95" x="277" y="232.0107">HTTPS on the</text><text fill="#666666" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="54" x="299.5" y="248.3076">Internet</text><!--MD5=[b37f33b0adf6ddf8df37898ea1b4d81f]
link r2 to lb1--><path d="M539.07,281.7256 C561.39,325.6056 606.73,414.7856 630.57,461.6656 " fill="none" id="r2-to-lb1" style="stroke:#666666;stroke-width:2.0;"/><polygon fill="#666666" points="632.95,466.3456,632.4525,456.5093,630.6911,461.885,625.3154,460.1236,632.95,466.3456" style="stroke:#666666;stroke-width:2.0;"/><text fill="#666666" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="46" x="579" y="360.5107">HTTPS</text><!--MD5=[25e79779583fe1397abae1cbf5041f3a]
link lb2 to lb1--><path d="M429.21,493.0156 C472.03,493.0156 526.76,493.0156 570.51,493.0156 " fill="none" id="lb2-to-lb1" style="stroke:#666666;stroke-width:2.0;"/><polygon fill="#666666" points="575.52,493.0156,566.52,489.0156,570.52,493.0156,566.52,497.0156,575.52,493.0156" style="stroke:#666666;stroke-width:2.0;"/><text fill="#666666" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="110" x="447.5" y="486.0107">Heartbeat VRRP</text><!--MD5=[f6908ca845453f8da6b8af004b80a660]
link lb1 to ha1--><path d="M656.35,466.3756 C671.32,432.2956 702.71,375.3156 751.5,355.5156 C782.59,342.8956 871.41,342.8956 902.5,355.5156 C947.7,373.8556 975.03,426.9356 988.55,461.5256 " fill="none" id="lb1-to-ha1" style="stroke:#666666;stroke-width:2.0;"/><polygon fill="#666666" points="990.44,466.4856,990.989,456.6521,988.6672,461.8105,983.5088,459.4886,990.44,466.4856" style="stroke:#666666;stroke-width:2.0;"/><!--MD5=[349c4bed22e844d2c767a9f74b8bef82]
link ha1 to guis1--><path d="M1003.03,519.6456 C1010.28,565.7256 1025.66,663.4856 1035.38,725.2256 " fill="none" id="ha1-to-guis1" style="stroke:#666666;stroke-width:2.0;"/><polygon fill="#666666" points="1036.19,730.3456,1038.7275,720.8293,1035.4051,725.4076,1030.8267,722.0852,1036.19,730.3456" style="stroke:#666666;stroke-width:2.0;"/><text fill="#666666" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="37" x="1010" y="565.5107">HTTP</text><!--MD5=[cc2c3c92d98e429caea85a93febf697b]
link api1 to mq1--><path d="M482.42,807.6656 C520.32,830.4156 579.33,862.5956 635,879.5156 C662.85,887.9856 673.75,874.9456 700,887.5156 C719.56,896.8856 715.36,912.3156 735,921.5156 C765.76,935.9156 781.78,912.2056 811,929.5156 C851.37,953.4356 878.97,1001.4956 894.11,1034.5756 " fill="none" id="api1-to-mq1" style="stroke:#666666;stroke-width:2.0;"/><polygon fill="#666666" points="896.25,1039.3456,896.1929,1029.4969,894.1928,1034.7884,888.9013,1032.7884,896.25,1039.3456" style="stroke:#666666;stroke-width:2.0;"/><text fill="#666666" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="54" x="761" y="901.5107">product</text><text fill="#666666" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="104" x="740" y="917.8076">JMS / RabbitMQ</text><!--MD5=[09082bc8e5792c6c41b711aecd7ba620]
link batch1 to mq1--><path d="M808.13,823.5656 C823.85,842.0256 841.04,864.7056 853,887.5156 C878.16,935.4956 893.67,996.7656 901.55,1034.5556 " fill="none" id="batch1-to-mq1" style="stroke:#666666;stroke-width:2.0;"/><polygon fill="#666666" points="902.57,1039.5056,904.6896,1029.8875,901.5702,1034.6066,896.8511,1031.4872,902.57,1039.5056" style="stroke:#666666;stroke-width:2.0;"/><text fill="#666666" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="65" x="888.5" y="901.5107">consume</text><text fill="#666666" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="104" x="873" y="917.8076">JMS / RabbitMQ</text><!--MD5=[7b1baacdd1b512b0b5526a0821eb1c32]
link api1 to pg1--><path d="M474.47,807.6956 C522.93,845.8356 610.29,913.8056 627,921.5156 C641.88,928.3856 650.17,919.3156 663,929.5156 C696.04,955.7756 713.73,1002.3056 722.49,1034.4756 " fill="none" id="api1-to-pg1" style="stroke:#666666;stroke-width:2.0;"/><polygon fill="#666666" points="723.81,1039.5056,725.3596,1029.7794,722.5235,1034.674,717.6289,1031.8379,723.81,1039.5056" style="stroke:#666666;stroke-width:2.0;"/><text fill="#666666" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="67" x="628" y="909.5107">JDBC / PG</text><!--MD5=[64c0ccfecd872af91c7d9f9c4e978a76]
link batch1 to mail1--><path d="M823.48,823.5456 C852.67,843.6856 890.13,866.3156 927,879.5156 C951.91,888.4356 964.63,871.9156 986,887.5156 C1034.69,923.0556 1050.47,996.7456 1055.58,1038.6356 " fill="none" id="batch1-to-mail1" style="stroke:#666666;stroke-width:2.0;"/><polygon fill="#666666" points="1056.17,1043.8356,1059.1161,1034.4377,1055.599,1038.8683,1051.1684,1035.3513,1056.17,1043.8356" style="stroke:#666666;stroke-width:2.0;"/><text fill="#666666" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="147" x="1015" y="909.5107">SMTP / sending mails</text><!--MD5=[8fcf5976a98e3bca57aeefbb1aee650b]
link api1 to gw1--><path d="M447.15,807.5256 C457.8,860.3556 482.25,981.5356 493.77,1038.6556 " fill="none" id="api1-to-gw1" style="stroke:#666666;stroke-width:2.0;"/><polygon fill="#666666" points="494.78,1043.6456,496.8996,1034.0275,493.7802,1038.7466,489.0611,1035.6272,494.78,1043.6456" style="stroke:#666666;stroke-width:2.0;"/><text fill="#666666" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="97" x="470" y="909.5107">SOAP / HTTPS</text><!--MD5=[f34dc1f3b1c6ff82a7e06f995e1d7775]
link ha1 to api1--><path d="M965.31,519.7256 C951.89,528.6956 935.87,537.9156 920,543.5156 C799.71,585.9656 749.07,520.4156 635,577.5156 C555.27,617.4256 490.64,704.2256 460.46,750.1456 " fill="none" id="ha1-to-api1" style="stroke:#666666;stroke-width:2.0;"/><polygon fill="#666666" points="457.64,754.4656,465.9057,749.1105,460.3705,750.277,459.2039,744.7417,457.64,754.4656" style="stroke:#666666;stroke-width:2.0;"/><text fill="#666666" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="87" x="893" y="565.5107">REST / HTTP</text><!--MD5=[237e6b0fd7c332b0935438af2d9c4b6d]
link sup1 to all_servers--><path d="M820,281.7256 C820,325.4356 820,414.0656 820,461.0956 " fill="none" id="sup1-to-all_servers" style="stroke:#666666;stroke-width:2.0;"/><polygon fill="#666666" points="820,466.3456,824,457.3456,820,461.3456,816,457.3456,820,466.3456" style="stroke:#666666;stroke-width:2.0;"/><text fill="#666666" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="40" x="821" y="360.5107">SNMP</text><!--MD5=[3c3149577a103c19ab430be03d9ab27e]
reverse link bay1 to bdd1--><path d="M345.64,1034.2156 C353.91,1000.6556 371.66,952.6556 408,930.0156 C477.41,886.7756 526.74,880.7356 592,930.0156 C604.3475,939.3381 613.0819,952.195 619.2239,966.3727 C620.7594,969.9171 622.1329,973.544 623.3603,977.219 C623.5137,977.6783 623.6649,978.1384 623.8138,978.5992 " fill="none" id="bay1-backto-bdd1" style="stroke:#666666;stroke-width:2.0;"/><polygon fill="#666666" points="344.39,1039.4756,350.3617,1031.6437,345.5455,1034.611,342.5782,1029.7948,344.39,1039.4756" style="stroke:#666666;stroke-width:2.0;"/><text fill="#666666" font-family="sans-serif" font-size="15" font-weight="bold" lengthAdjust="spacing" textLength="21" x="390.5" y="909.939">FC</text><rect fill="#DDDDDD" height="62.8906" rx="5" ry="5" style="stroke:#000000;stroke-width:1.0;" width="265" x="928" y="1170.5156"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="0" x="1034" y="1190.5107"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="39" x="1039" y="1190.5107">Type</text><rect fill="#FFFFFF" height="16.2969" style="stroke:none;stroke-width:1.0;" width="100" x="934" y="1193.8125"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="0" x="958" y="1206.8076"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="122" x="1038" y="1206.8076">deployment node</text><rect fill="#438DD5" height="16.2969" style="stroke:none;stroke-width:1.0;" width="100" x="934" y="1210.1094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="0" x="942" y="1223.1045"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="145" x="1038" y="1223.1045">deployment instance</text><line style="stroke:#000000;stroke-width:1.0;" x1="934" x2="1187" y1="1177.5156" y2="1177.5156"/><line style="stroke:#000000;stroke-width:1.0;" x1="934" x2="1187" y1="1193.8125" y2="1193.8125"/><line style="stroke:#000000;stroke-width:1.0;" x1="934" x2="1187" y1="1210.1094" y2="1210.1094"/><line style="stroke:#000000;stroke-width:1.0;" x1="934" x2="1187" y1="1226.4063" y2="1226.4063"/><line style="stroke:#000000;stroke-width:1.0;" x1="934" x2="934" y1="1177.5156" y2="1226.4063"/><line style="stroke:#000000;stroke-width:1.0;" x1="1034" x2="1034" y1="1177.5156" y2="1226.4063"/><line style="stroke:#000000;stroke-width:1.0;" x1="1187" x2="1187" y1="1177.5156" y2="1226.4063"/><!--MD5=[ac42e757bf723f32813574f5e3e283ee]
@startuml
!include C4/C4_Deployment.puml
title infrastructure
header Deployment diagram \nInfrastucture architecture \n AllMyData Project \n(partial)
LAYOUT_WITH_LEGEND()


Node("client", "Client", "Desktop / mobile") {
  Node("nav1", "Web browser", "Chrome / Firefox / Safari") {
    Container("spa", "AllMyData SPA application", "React.js")
  }
}

Node("dc", "Datacenter", "Paris") {
    Node("r2", "Firewall", "Cisco Firepower 4100")
    Node("lb1", "LB Debian lb1", "<<active>>")
    Node("lb2", "LB Debian lb2", "<<passive>>")

    Node("rp1", "Reverse Proxy", "x2 Debian Buster <<active/active>>") {
      Container("ha1", "Reverse Proxy", "HaProxy")
    }

    Node("server_gui", "HMI HMI server", "x2 Debian Buster") {
      Node("sw1", "Web server", "Nginx") {
        Container("guis1", "SPA Web Application", "React.js", "Expose static resources \n (.js, .html, images ...)")
      }
      Node("tomcat_batchs1", "JEE Server", "Tomcat 10") {
        Container("batch1", "batch-process-requests", "Java", "Process requests")
      }
    }

    Node("API_server", "API Server", "x3, RHEL") {
      Node("wilfly1", "JEE Server", "Wildfly") {
        Container("api1", "API service-allmydata", "Java")
      }
    }

    Node("bdd1", "BDD Server", "RHEL") {
      ContainerDb("pg1", "PostgreSQL", "PostgreSQL 12")
      ContainerDb("mq1", "Message queue", "RabbitMQ")
      Container("mail1", "MTA", "Postfix")
    }

    Node("sup1_server", "Monitoring Server", "x1 Debian Stretch") {
      Container("sup1", "Monitoring tool", "Centreon")
    }

    Node("ech1", "Exchange Server", "x1 Windows Server") {
      Container("gw1", "API Gateway", "Axway API Gateway")
    }

    ContainerDb("bay1", "SAN EMC", "bay 1")
    Node("all_servers", "<all servers>", "Monitoring")
}

spa -> r2 : HTTPS on the Internet
r2 - -> lb1 : HTTPS
lb2 -> lb1 : Heartbeat VRRP
lb1 -> ha1
ha1 - -> guis1 : HTTP
api1 -> mq1 : product \n JMS / RabbitMQ
batch1 - -> mq1 : consume \n JMS / RabbitMQ
api1 - -> pg1: JDBC / PG
batch1 - -> mail1 : SMTP / sending mails
api1 - -> gw1 : SOAP / HTTPS
ha1 - -> api1 : REST / HTTP
sup1 - -> all_servers : SNMP

Rel_Left("bdd1", "bay1", "FC")

@enduml

@startuml





skinparam defaultTextAlignment center

skinparam wrapWidth 200
skinparam maxMessageSize 150

skinparam rectangle {
    StereotypeFontSize 12
    shadowing false
}

skinparam database {
    StereotypeFontSize 12
    shadowing false
}

skinparam Arrow {
    Color #666666
    FontColor #666666
    FontSize 14
    Thickness 2
}

skinparam rectangle<<zone>> {
    Shadowing false
    StereotypeFontSize 0
    FontColor #444444
    BorderColor #444444
    BorderStyle dashed
}






















skinparam rectangle<<person>> {
    StereotypeFontColor #FFFFFF
    FontColor #FFFFFF
    BackgroundColor #08427B
    BorderColor #073B6F
}

skinparam rectangle<<external_person>> {
    StereotypeFontColor #FFFFFF
    FontColor #FFFFFF
    BackgroundColor #686868
    BorderColor #8A8A8A
}

skinparam rectangle<<system>> {
    StereotypeFontColor #FFFFFF
    FontColor #FFFFFF
    BackgroundColor #1168BD
    BorderColor #3C7FC0
}

skinparam rectangle<<external_system>> {
    StereotypeFontColor #FFFFFF
    FontColor #FFFFFF
    BackgroundColor #999999
    BorderColor #8A8A8A
}

skinparam database<<system>> {
    StereotypeFontColor #FFFFFF
    FontColor #FFFFFF
    BackgroundColor #1168BD
    BorderColor #3C7FC0
}

skinparam database<<external_system>> {
    StereotypeFontColor #FFFFFF
    FontColor #FFFFFF
    BackgroundColor #999999
    BorderColor #8A8A8A
}
















skinparam rectangle<<unité déployable>> {
    StereotypeFontColor #FFFFFF
    FontColor #FFFFFF
    BackgroundColor #438DD5
    BorderColor #3C7FC0
}

skinparam database<<unité déployable>> {
    StereotypeFontColor #FFFFFF
    FontColor #FFFFFF
    BackgroundColor #438DD5
    BorderColor #3C7FC0
}












skinparam rectangle<<component>> {
    StereotypeFontColor #FFFFFF
    FontColor #000000
    BackgroundColor #85BBF0
    BorderColor #78A8D8
}

skinparam database<<component>> {
    StereotypeFontColor #FFFFFF
    FontColor #000000
    BackgroundColor #85BBF0
    BorderColor #78A8D8
}











skinparam rectangle<<instance>> {
  roundCorner 8
  Shadowing false
  StereotypeFontColor #FFFFFF
  FontColor #FFFFFF
  BackgroundColor #438DD5
  BorderColor #3C7FC0
}

skinparam database<<instance>> {
  roundCorner 8
  Shadowing false
  StereotypeFontColor #FFFFFF
  FontColor #FFFFFF
  BackgroundColor #438DD5
  BorderColor #3C7FC0
}

skinparam rectangle<<node>> {
  roundCorner 8
  Shadowing false
  StereotypeFontSize 0
  FontColor #444444
  BackgroundColor #FFFFFF
  BorderColor #444444
}





title infrastructure
header Deployment diagram \nInfrastucture architecture \n AllMyData Project \n(partial)
hide stereotype
legend right
|=                    |= Type               |
|<#FFFFFF>      | deployment node     |
|<#438DD5>  | deployment instance |
endlegend


rectangle "==Client\n<size:12>[Desktop / mobile]</size>" as client {
  rectangle "==Web browser\n<size:12>[Chrome / Firefox / Safari]</size>" as nav1 {
    rectangle "==AllMyData SPA application\n//<size:12>[React.js]</size>//" <<unité déployable>> as spa
  }
}

rectangle "==Datacenter\n<size:12>[Paris]</size>" as dc {
    rectangle "==Firewall\n<size:12>[Cisco Firepower 4100]</size>" as r2
    rectangle "==LB Debian lb1\n<size:12>[<<active>>]</size>" as lb1
    rectangle "==LB Debian lb2\n<size:12>[<<passive>>]</size>" as lb2

    rectangle "==Reverse Proxy\n<size:12>[x2 Debian Buster <<active/active>>]</size>" as rp1 {
      rectangle "==Reverse Proxy\n//<size:12>[HaProxy]</size>//" <<unité déployable>> as ha1
    }

    rectangle "==HMI HMI server\n<size:12>[x2 Debian Buster]</size>" as server_gui {
      rectangle "==Web server\n<size:12>[Nginx]</size>" as sw1 {
        rectangle "==SPA Web Application\n//<size:12>[React.js]</size>//\n\n Expose static resources \n (.js, .html, images ...)" <<unité déployable>> as guis1
      }
      rectangle "==JEE Server\n<size:12>[Tomcat 10]</size>" as tomcat_batchs1 {
        rectangle "==batch-process-requests\n//<size:12>[Java]</size>//\n\n Process requests" <<unité déployable>> as batch1
      }
    }

    rectangle "==API Server\n<size:12>[x3, RHEL]</size>" as API_server {
      rectangle "==JEE Server\n<size:12>[Wildfly]</size>" as wilfly1 {
        rectangle "==API service-allmydata\n//<size:12>[Java]</size>//" <<unité déployable>> as api1
      }
    }

    rectangle "==BDD Server\n<size:12>[RHEL]</size>" as bdd1 {
      database "==PostgreSQL\n//<size:12>[PostgreSQL 12]</size>//" <<unité déployable>> as pg1
      database "==Message queue\n//<size:12>[RabbitMQ]</size>//" <<unité déployable>> as mq1
      rectangle "==MTA\n//<size:12>[Postfix]</size>//" <<unité déployable>> as mail1
    }

    rectangle "==Monitoring Server\n<size:12>[x1 Debian Stretch]</size>" as sup1_server {
      rectangle "==Monitoring tool\n//<size:12>[Centreon]</size>//" <<unité déployable>> as sup1
    }

    rectangle "==Exchange Server\n<size:12>[x1 Windows Server]</size>" as ech1 {
      rectangle "==API Gateway\n//<size:12>[Axway API Gateway]</size>//" <<unité déployable>> as gw1
    }

    database "==SAN EMC\n//<size:12>[bay 1]</size>//" <<unité déployable>> as bay1
    rectangle "==<all servers>\n<size:12>[Monitoring]</size>" as all_servers
}

spa -> r2 : HTTPS on the Internet
r2 - -> lb1 : HTTPS
lb2 -> lb1 : Heartbeat VRRP
lb1 -> ha1
ha1 - -> guis1 : HTTP
api1 -> mq1 : product \n JMS / RabbitMQ
batch1 - -> mq1 : consume \n JMS / RabbitMQ
api1 - -> pg1: JDBC / PG
batch1 - -> mail1 : SMTP / sending mails
api1 - -> gw1 : SOAP / HTTPS
ha1 - -> api1 : REST / HTTP
sup1 - -> all_servers : SNMP

bdd1 -LEFT-> bay1 : "===FC"

@enduml

PlantUML version 1.2021.00(Sun Jan 10 11:25:05 CET 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>